dist: bionic
language: python
python: 3.6
matrix:
  include:
    - python: 3.6
      env: TOXENV=py36
      compiler: clang
    - python: 3.7
      env: TOXENV=py37
      compiler: clang
    - env: TOXENV=flake8
    - env: TOXENV=format
    - env: TOXENV=mypy
    - env: TOXENV=coverage
before_install:
  - python --version
install:
  - pip install cython
  - pip install tox
  - pip install coveralls
before_script:
  - pip install grpcio-tools
  - make  # generate required C++ files
script:
  - travis_wait 60 tox
after_success:
  - if [[ $TOXENV == "coverage" ]]; then coveralls; fi
